const translations = {
    en: {
        nav_about: "About Me",
        nav_projects: "Assets",
        nav_map: "Map",
        nav_contact: "Contact",
        nav_cv: "CV",
        hero_tag: "// SPATIAL_SYSTEMS_ENGINEERING",
        hero_title: "DESIGNING THE FUTURE OF SPATIAL DATA",
        hero_desc: "High-Performance Geospatial Engineering & Automated Systems Architecture.",
        hero_btn_projects: "Explore System",
        hero_btn_contact: "Link_Direct",
        terminal_init: "LOADING_CORE_SYSTEM...",
        terminal_status_1: "FETCH_SPATIAL_NODES...",
        terminal_status_2: "SYNC_POSTGIS_BUFFERS...",
        terminal_status_3: "BYPASS_MANUAL_LIMITS...",
        terminal_done: "ACCESS_GRANTED.",
        about_label: "// ARCHITECTURE",
        about_title: "The Engineering Core",
        about_p1: "We bridge the gap between traditional GIS mapping and scalable software architecture. Focused on high-precision data workflows and technical automation.",
        proj_label: "// FLAGSHIP_ASSETS",
        cv_header: "BIO-NEURAL CV // ALBERT GAVIRIA V5.2",
        cv_close: "EXIT_INTERFACE",
        cv_label_profile: "Personal_Profile",
        cv_label_skills: "Technical_DNA",
        cv_label_langs: "Languages",
        cv_label_metrics: "Impact_Metrics",
        cv_label_edu: "Academic_History",
        cv_label_cert: "Credentials",
        cv_label_exp_main: "Current_Mission",
        cv_label_exp_log: "Professional_Log",
        cv_label_future: "Future_Nodes",
        cv_summary: "Profesional SIG con una visión integral que fusiona la excelencia técnica en Sistemas de Información Geográfica con una sólida maestría en arquitectura de bases de datos y desarrollo de software. Especialista en la automatización de flujos de trabajo geoespaciales mediante Python y SQL Server/PostgreSQL para diseñar infraestructuras de alto rendimiento.",
        footer_copy: "© 2026 ALBERT DANIEL GAVIRIA ZAPATA. ALL RIGHTS RESERVED.",
        form_name: "Full_Name",
        form_email: "Email_Uplink",
        form_msg: "Mission_Brief",
        form_btn: "INITIATE_HANDSHAKE",
        metrics_label: "// PROVEN_PERFORMANCE",
        metrics_title: "Neural Impact Core",
        metric_roi: "Operational Efficiency",
        metric_error: "Error Margin Reduction",
        metric_team: "Personnel Managed",
        metric_nodes: "Primary Data Nodes",
        contact_title: "HANDSHAKE PROTOCOL.",
        contact_desc: "Architecting the next generation of spatial intelligence. Establish your secure link to initiate technical consultation.",
        contact_secure: ">>> CH_SECURE: ALBERT_GAVIRIA",
        contact_loc: ">>> LOC_SYNC: 6.2442° N, 75.5812° W",
        form_placeholder_name: "Organization / Lead Architect",
        form_placeholder_msg: "Define mission parameters & objectives...",
        node_medellin: "<b>GEOSAT S.A.S // ANALISTA GEOGRÁFICO</b><br>Procesamiento avanzado de información geoespacial, fotointerpretación y restitución vectorial. Digitalización de precisión para actualización catastral masiva.",
        node_solita: "<b>ACCION DEL CAUCA S.A.S // QA/QC RECONOCIMIENTO</b><br>Auditorías técnicas de calidad sobre información predial bajo normativa IGAC. Validación de componentes físicos, jurídicos y económicos.",
        node_uraba: "<b>ARBIRTRIUM S.A.S // LÍDER Y COORDINADOR SIG</b><br>Liderazgo técnico de equipos de reconocimiento predial y digitalización catastral masiva. Gestión avanzada de calidad y estructuración topológica.",
        node_arboletes: "<b>ARBIRTRIUM S.A.S // COORDINADOR CAMPO</b><br>Coordinación estratégica de operativos de campo para identificación predial y barrido catastral.",
        node_barranquilla: "<b>UT SMART CITY // COORDINADOR PROFESIONAL SIG</b><br>Implementación de estándares LADM-COL y dirección de procesos de digitalización masiva. Especialista en gestión predial y fotogrametría con drones.",
        node_gaitan: "<b>COSARGO SAS // GESTOR AMBIENTAL</b><br>Supervisión de cumplimiento normativo ambiental en proyectos de infraestructura y gestión de recursos naturales."
    },
    es: {
        nav_about: "Sobre Mí",
        nav_projects: "Proyectos Desplegados",
        nav_map: "Mapa",
        nav_contact: "Contacto",
        nav_cv: "CV",
        hero_tag: "// INGENIERÍA DE SISTEMAS ESPACIALES",
        hero_title: "DISEÑANDO EL FUTURO DE LOS DATOS ESPACIALES",
        hero_desc: "Ingeniería geoespacial de alto rendimiento y arquitectura de sistemas automatizados.",
        hero_btn_projects: "Explorar Sistema",
        hero_btn_contact: "Contactame",
        terminal_init: "CARGANDO_SISTEMA_CORE...",
        terminal_status_1: "RECUPERANDO_NODOS...",
        terminal_status_2: "SINCRONIZANDO_POSTGIS...",
        terminal_status_3: "OMITIENDO_LIMITES_MANUALES...",
        terminal_done: "ACCESO_CONCEDIDO.",
        about_label: "// ARQUITECTURA",
        about_title: "El Núcleo de Ingeniería",
        about_p1: "Cerramos la brecha entre el mapeo SIG tradicional y la arquitectura de software escalable. Enfocados en flujos de datos de alta precisión y automatización técnica.",
        proj_label: "// DESPLIEGUES_TÉCNICOS",
        cv_header: "CV BIO-NEURONAL // ALBERT GAVIRIA V5.2",
        cv_close: "SALIR_INTERFAZ",
        cv_label_profile: "Perfil_Personal",
        cv_label_skills: "ADN_Técnico",
        cv_label_langs: "Idiomas",
        cv_label_metrics: "Métricas_Impacto",
        cv_label_edu: "Historial_Académico",
        cv_label_cert: "Credenciales",
        cv_label_exp_main: "Misión_Actual",
        cv_label_exp_log: "Registro_Profesional",
        cv_label_future: "Nodos_Futuros",
        cv_summary: "Tecnólogo y Profesional SIG fusionando la excelencia técnica en Sistemas Geosociales con una profunda experiencia en arquitectura de bases de datos e ingeniería de software. Dominando SQL Server y PostgreSQL para diseñar infraestructuras espaciales de alto rendimiento.",
        footer_copy: "© 2026 ALBERT DANIEL GAVIRIA ZAPATA. TODOS LOS DERECHOS RESERVADOS.",
        form_name: "Nombre_Completo",
        form_email: "Correo_Uplink",
        form_msg: "Breve_Misión",
        form_btn: "INICIAR_PROTOCOLO",
        metrics_label: "// RENDIMIENTO_PROBADO",
        metrics_title: "Núcleo de Impacto Neural",
        metric_roi: "Eficiencia Operativa",
        metric_error: "Reducción de Margen de Error",
        metric_team: "Personal Gestionado",
        metric_nodes: "Nodos de Datos Primarios",
        contact_title: "PROTOCOLO DE ENLACE.",
        contact_desc: "Arquitectando la próxima generación de inteligencia espacial. Establezca su enlace seguro para iniciar la consulta técnica.",
        contact_secure: ">>> CANAL_SEGURO: ALBERT_GAVIRIA",
        contact_loc: ">>> LOC_SYNC: 6.2442° N, 75.5812° W",
        form_placeholder_name: "Organización / Arquitecto Principal",
        form_placeholder_msg: "Defina los parámetros y objetivos de la misión...",
        node_medellin: "<b>GEOSAT S.A.S // ANALISTA GEOGRÁFICO</b><br>Procesamiento avanzado de información geoespacial, fotointerpretación y restitución vectorial. Digitalización de precisión para actualización catastral masiva.",
        node_solita: "<b>ACCION DEL CAUCA S.A.S // QA/QC RECONOCIMIENTO</b><br>Auditorías técnicas de calidad sobre información predial bajo normativa IGAC. Validación de componentes físicos, jurídicos y económicos.",
        node_uraba: "<b>ARBIRTRIUM S.A.S // LÍDER Y COORDINADOR SIG</b><br>Liderazgo técnico de equipos de reconocimiento predial y digitalización catastral masiva. Gestión avanzada de calidad y estructuración topológica.",
        node_arboletes: "<b>ARBIRTRIUM S.A.S // COORDINADOR CAMPO</b><br>Coordinación estratégica de operativos de campo para identificación predial y barrido catastral.",
        node_barranquilla: "<b>UT SMART CITY // COORDINADOR PROFESIONAL SIG</b><br>Implementación de estándares LADM-COL y dirección de procesos de digitalización masiva. Especialista en gestión predial y fotogrametría con drones.",
        node_gaitan: "<b>COSARGO SAS // GESTOR AMBIENTAL</b><br>Supervisión de cumplimiento normativo ambiental en proyectos de infraestructura y gestión de recursos naturales."
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // 0. LUXURY CURSOR PHYSICS
    const cursor = document.querySelector('.cursor-main');
    const trail = document.querySelector('.cursor-trail');
    let mouseX = 0, mouseY = 0, trailX = 0, trailY = 0;

    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX; mouseY = e.clientY;
        if (cursor) cursor.style.transform = `translate3d(${mouseX}px, ${mouseY}px, 0)`;
    });

    const animateTrail = () => {
        trailX += (mouseX - trailX) * 0.15;
        trailY += (mouseY - trailY) * 0.15;
        if (trail) trail.style.transform = `translate3d(${trailX - 16}px, ${trailY - 16}px, 0)`;
        requestAnimationFrame(animateTrail);
    };
    animateTrail();

    // 1. ADVANCED CV MODAL LOGIC
    const cvTrigger = document.getElementById('cv-trigger');
    const cvOverlay = document.getElementById('cv-neural-overlay');
    const cvClose = document.getElementById('cv-neural-close');
    const dnaBars = document.querySelectorAll('.dna-bar-fill');

    if (cvTrigger) {
        cvTrigger.addEventListener('click', (e) => {
            cvOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            setTimeout(() => {
                dnaBars.forEach(bar => {
                    const level = bar.getAttribute('data-level');
                    bar.style.width = level;
                });
            }, 500);
        });
    }

    if (cvClose) {
        cvClose.addEventListener('click', () => {
            cvOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
            dnaBars.forEach(bar => bar.style.width = '0');
        });
    }

    // 2. TERMINAL BOOTUP (V5.2 Character-by-Character)
    const terminal = document.getElementById('terminal-intro');
    const terminalContent = document.getElementById('terminal-content');

    let currentLang = 'en';
    try { currentLang = localStorage.getItem('dgz_lang') || 'en'; } catch (e) { }

    const introSteps = ['terminal_init', 'terminal_status_1', 'terminal_status_2', 'terminal_status_3', 'terminal_done'];
    let stepIndex = 0;

    const typeChar = (lineEl, text, charIdx, resolve) => {
        if (charIdx < text.length) {
            lineEl.textContent += text[charIdx];
            setTimeout(() => typeChar(lineEl, text, charIdx + 1, resolve), 30 + Math.random() * 40);
        } else {
            resolve();
        }
    };

    const runTerminal = async () => {
        if (!terminalContent) return;

        // Add initial system headers
        const header = document.createElement('div');
        header.style.color = 'var(--accent-gold)';
        header.style.marginBottom = '1.5rem';
        header.textContent = `[DGZ_SIRIUS_OS_V5.2_LOADER] -- KERNEL: 0x${Math.random().toString(16).slice(2, 10).toUpperCase()}`;
        terminalContent.appendChild(header);

        for (const stepKey of introSteps) {
            const line = document.createElement('div');
            line.className = 'terminal-line';
            line.textContent = '>>> ';
            terminalContent.appendChild(line);

            const text = translations[currentLang][stepKey];
            await new Promise(resolve => typeChar(line, text, 0, resolve));

            // Random glitch line sometimes
            if (Math.random() > 0.7) {
                const glitch = document.createElement('div');
                glitch.style.opacity = '0.3';
                glitch.style.fontSize = '0.6rem';
                glitch.textContent = `[MEM_BUFFER] 0x${Math.random().toString(16).slice(2, 14)} -- STABLE`;
                terminalContent.appendChild(glitch);
            }

            await new Promise(r => setTimeout(r, 200));
        }

        // Add cursor at the end
        const cursor = document.createElement('span');
        cursor.className = 'terminal-cursor';
        terminalContent.appendChild(cursor);

        setTimeout(() => {
            if (terminal) {
                terminal.classList.add('hidden');
                setTimeout(() => terminal.style.display = 'none', 1000);
            }
        }, 1200);
    };

    if (terminal) runTerminal();

    // 3. i18n ENGINE
    const langBtns = document.querySelectorAll('.lang-btn');
    const setLanguage = (lang) => {
        try { localStorage.setItem('dgz_lang', lang); } catch (e) { }
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                    el.placeholder = translations[lang][key];
                } else {
                    el.textContent = translations[lang][key];
                }
            }
        });
        langBtns.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-lang') === lang));

        // Dispatch event for map markers
        window.dispatchEvent(new Event('languageChanged'));
    };
    langBtns.forEach(btn => btn.addEventListener('click', () => setLanguage(btn.getAttribute('data-lang'))));
    setLanguage(currentLang);

    // 4. OBSERVATION SYSTEM & COUNTERS
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');

                // Animate Numbers if it's a metric
                if (entry.target.classList.contains('metric-card')) {
                    const numEl = entry.target.querySelector('.metric-num');
                    const target = parseInt(numEl.innerText.replace(/\D/g, ''));
                    const suffix = numEl.innerText.replace(/[0-9]/g, '');
                    const prefix = numEl.innerText.startsWith('+') ? '+' : (numEl.innerText.startsWith('-') ? '-' : '');

                    let current = 0;
                    const duration = 2000;
                    const stepTime = Math.abs(Math.floor(duration / target));

                    const counter = setInterval(() => {
                        current += 1;
                        numEl.textContent = prefix + current + suffix;
                        if (current >= target) {
                            numEl.textContent = prefix + target + suffix;
                            clearInterval(counter);
                        }
                    }, stepTime);
                }
            }
        });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    // 5. MAP ARCHITECTURE (V5.2 Immersive Spatial Intelligence)
    const mapElement = document.getElementById('interactive-map');
    if (mapElement && typeof L !== 'undefined') {
        const hqCoord = [6.2442, -75.5812];
        const map = L.map('interactive-map', {
            center: hqCoord,
            zoom: 13,
            zoomControl: false,
            attributionControl: false,
            scrollWheelZoom: false
        });

        // Layer System
        const tiles = {
            dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png'),
            satellite: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'),
            topo: L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png')
        };

        tiles.dark.addTo(map);

        // Real-time HUD
        const hudLat = document.getElementById('hud-lat');
        const hudLng = document.getElementById('hud-lng');
        const hudZoom = document.getElementById('hud-zoom');

        map.on('mousemove', (e) => {
            if (hudLat) hudLat.textContent = e.latlng.lat.toFixed(4) + '° N';
            if (hudLng) hudLng.textContent = e.latlng.lng.toFixed(4) + '° W';
        });

        map.on('zoomend', () => {
            if (hudZoom) hudZoom.textContent = map.getZoom().toFixed(2);
        });

        // Layer Switcher Logic
        document.querySelectorAll('.layer-opt').forEach(opt => {
            opt.addEventListener('click', () => {
                const layerKey = opt.getAttribute('data-layer');
                document.querySelectorAll('.layer-opt').forEach(el => el.classList.remove('active'));
                opt.classList.add('active');

                Object.values(tiles).forEach(t => map.removeLayer(t));
                tiles[layerKey].addTo(map);
            });
        });

        // Custom Buttons
        document.getElementById('map-recenter')?.addEventListener('click', () => {
            map.flyTo(hqCoord, 13, { duration: 2 });
        });

        document.getElementById('map-scan')?.addEventListener('click', () => {
            scanRadius = 0;
            animateScan();
        });

        // Core Node (Medellín HQ)
        const coreIcon = L.divIcon({
            className: 'custom-marker',
            html: `
                <div class="marker-pulse"></div>
                <div class="marker-core" style="width:12px; height:12px; background:var(--accent-electric); border-radius:50%; border:2px solid #fff; position:relative; z-index:2;"></div>
            `,
            iconSize: [20, 20]
        });

        const mainNode = L.marker(hqCoord, { icon: coreIcon }).addTo(map);

        mainNode.bindPopup(`
            <div style="background: rgba(0,0,0,0.9); padding: 15px; border: 1px solid var(--accent-electric); border-radius: 12px; font-family: var(--font-mono);">
                <div style="color: var(--accent-electric); font-size: 0.7rem; margin-bottom: 5px; font-weight:800;">[PRIMARY_HUB_ACTIVE]</div>
                <div style="color: #fff; font-size: 0.9rem; font-weight:900; letter-spacing:-0.03em;">MEDELLÍN_SOVEREIGN_V5.2</div>
                <div style="color: var(--text-tertiary); font-size: 0.6rem; margin-top: 8px; border-top:1px solid rgba(255,255,255,0.1); padding-top:8px;">
                    STATUS: OPTIMAL<br>
                    UPLINK: STABLE<br>
                    NODES: 6_ACTIVE
                </div>
            </div>
        `, { className: 'custom-popup', closeButton: false });

        // Neural Scan Effect
        let scanRadius = 0;
        const scanCircle = L.circle(hqCoord, {
            radius: 0,
            color: 'var(--accent-electric)',
            weight: 1,
            fillOpacity: 0.05,
            fillColor: 'var(--accent-electric)',
            interactive: false
        }).addTo(map);

        let isMapVisible = false;
        const mapObserver = new IntersectionObserver((entries) => {
            isMapVisible = entries[0].isIntersecting;
            if (isMapVisible) animateScan();
        }, { threshold: 0.1 });
        mapObserver.observe(mapElement);

        function animateScan() {
            if (!isMapVisible && scanRadius === 0) return;
            scanRadius += 40;
            if (scanRadius > 4000) scanRadius = 0;
            scanCircle.setRadius(scanRadius);
            scanCircle.setStyle({ opacity: 1 - (scanRadius / 4000) });
            if (isMapVisible || scanRadius > 0) requestAnimationFrame(animateScan);
        }

        // Add Secondary Spatial Nodes
        const experienceNodes = [
            { loc: [6.2442, -75.5812], key: "node_medellin", accent: "var(--accent-electric)" },
            { loc: [0.9639, -75.6453], key: "node_solita", accent: "#ff4b2b" },
            { loc: [10.9685, -74.7813], key: "node_barranquilla", accent: "var(--cv-accent-gold)" },
            { loc: [8.2753, -76.3773], key: "node_uraba", accent: "var(--accent-electric)" },
            { loc: [8.8504, -76.4255], key: "node_arboletes", accent: "var(--cv-accent-gold)" },
            { loc: [4.3134, -72.0811], key: "node_gaitan", accent: "var(--accent-electric)" }
        ];

        experienceNodes.forEach(node => {
            const marker = L.circleMarker(node.loc, {
                radius: 8,
                fillColor: node.accent,
                color: "#fff",
                weight: 2,
                fillOpacity: 1
            }).addTo(map);

            const updateTooltip = () => {
                const lang = localStorage.getItem('dgz_lang') || 'en';
                const content = `<div class="map-tooltip-content">${translations[lang][node.key]}</div>`;
                marker.bindTooltip(content, {
                    permanent: false,
                    direction: 'top',
                    className: 'custom-map-tooltip',
                    offset: [0, -10]
                });
            };

            updateTooltip();
            window.addEventListener('languageChanged', updateTooltip);
        });
    }

    // 6. TRANSMISSION FORM (AJAX)
    const form = document.getElementById('dgz-transmission-form');
    if (form) {
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitBtn = document.getElementById('submit-btn');
            const btnText = document.getElementById('btn-text');
            const feedback = document.getElementById('form-feedback');

            submitBtn.disabled = true;
            if (btnText) btnText.textContent = "TRANSMITTING...";
            if (feedback) {
                feedback.style.color = "var(--accent-electric)";
                feedback.textContent = ">>> ENCRYPTING_HANDSHAKE_V2.1...";
            }

            try {
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: new FormData(form),
                    headers: { 'Accept': 'application/json' }
                });
                if (response.ok) {
                    if (feedback) feedback.textContent = ">>> HANDSHAKE_STABLE. MISSION_INITIATED.";
                    if (btnText) btnText.textContent = "STABLE";
                    form.reset();
                    setTimeout(() => {
                        submitBtn.disabled = false;
                        if (btnText) btnText.textContent = "INITIATE_HANDSHAKE";
                        if (feedback) feedback.textContent = "";
                    }, 5000);
                } else { throw new Error(); }
            } catch (error) {
                if (feedback) {
                    feedback.style.color = "#ff4b2b";
                    feedback.textContent = ">>> TRANSMISSION_CRITICAL_FAILURE. RETRY.";
                }
                submitBtn.disabled = false;
                if (btnText) btnText.textContent = "RE-INITIATE";
            }
        });
    }

    // 7. TILT EFFECT (Integrated from index.html & Optimized)
    const tiltItems = document.querySelectorAll('[data-tilt]');
    tiltItems.forEach(item => {
        item.addEventListener('mousemove', (e) => {
            const rect = item.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            item.style.transform = `perspective(2000px) rotateY(${x / 40}deg) rotateX(${-y / 40}deg) scale(1.02)`;
        });
        item.addEventListener('mouseleave', () => {
            item.style.transform = 'perspective(2000px) rotateY(0deg) rotateX(0deg) scale(1)';
        });
    });

    // 8. SCROLL PROGRESS (Integrated from index.html)
    window.addEventListener('scroll', () => {
        const progress = document.getElementById('scroll-progress');
        if (progress) {
            const total = document.documentElement.scrollHeight - window.innerHeight;
            progress.style.width = (window.scrollY / total * 100) + '%';
        }

        // Header scroll effect
        const header = document.getElementById('main-header');
        if (header) {
            header.classList.toggle('scrolled', window.scrollY > 50);
        }
    }, { passive: true });

    // 9. PERFORMANCE LOG (Innovation)
    console.log("%c DGZ_ENGINEERING_V5.2 %c NODE_CONNECTED %c ACCESS_LEVEL: SOVEREIGN ",
        "background: #00e5ff; color: #000; font-weight: 800; padding: 2px 5px; border-radius: 3px 0 0 3px;",
        "background: #ffb400; color: #000; font-weight: 800; padding: 2px 5px;",
        "background: #222; color: #00e5ff; padding: 2px 5px; border-radius: 0 3px 3px 0;");
    console.log(">>> [STATUS] Neural_Architecture: Synchronized // Spatial_Handshake: Stable // Kernel: 0x" + Math.random().toString(16).slice(2, 10).toUpperCase());

    // 10. INTERACTIVE TIMELINE LOGIC
    const timelineNodes = document.querySelectorAll('.timeline-node');
    const timelineData = {
        "2025 (Q4)": {
            title: "Analista Geográfico",
            subtitle: "GEOGRAFÍA SATELITAL GEOSAT S.A.S. | Medellín",
            desc: "Procesamiento avanzado de información geoespacial mediante fotointerpretación, análisis de insumos 360° y restitución vectorial. Digitalización de unidades de construcción para actualización catastral masiva."
        },
        "2025 (Q2)": {
            title: "QA/QC Calidad Predial",
            subtitle: "ACCION DEL CAUCA S.A.S. | Solita, Caquetá",
            desc: "Ejecución de auditorías técnicas de calidad (QA/QC) sobre reconocimiento predial, asegurando cumplimiento de normativa IGAC y validación de componentes físicos, jurídicos y económicos."
        },
        "2024 - Act": {
            title: "Coordinador Profesional SIG",
            subtitle: "UNION TEMPORAL SMART CITY | Barranquilla",
            desc: "Implementación de estándares LADM-COL e interoperabilidad. Dirección de procesos de digitalización masiva y control de calidad (QA) con cero inconsistencias gráficas."
        },
        "2024 (Q3)": {
            title: "Líder de Reconocimiento",
            subtitle: "ARBIRTRIUM S.A.S | Antioquia",
            desc: "Liderazgo técnico de equipos de reconocimiento predial. Verificación exhaustiva de mutaciones catastrales y componentes jurídicos en articulación con Registro."
        },
        "2023 - 24": {
            title: "Profesional SIG",
            subtitle: "GRUPO EMPRESARIAL OD | Barranquilla",
            desc: "Especialista en Geomática y gestión predial: procesamiento de ortofotos, fotogrametría y topografía con drones para proyectos de infraestructura."
        },
        "2022": {
            title: "Digitalizador Profesional SIG",
            subtitle: "CINTELI S.A.S | Barranquilla",
            desc: "Digitalización masiva conforme a normativa IGAC. Integración y cruce de bases de datos gráficas y alfanuméricas para garantizar consistencia topológica."
        }
    };

    const timelineTitle = document.getElementById('timeline-title');
    const timelineSubtitle = document.getElementById('timeline-subtitle');
    const timelineDescription = document.getElementById('timeline-description');
    const timelineContainer = document.querySelector('.timeline-content-display');

    if (timelineNodes.length > 0) {
        timelineNodes.forEach(node => {
            node.addEventListener('click', () => {
                timelineNodes.forEach(n => n.classList.remove('active'));
                node.classList.add('active');
                const year = node.querySelector('.node-year').textContent;
                const data = timelineData[year];
                if (data && timelineTitle) {
                    timelineContainer.style.opacity = '0';
                    setTimeout(() => {
                        timelineTitle.textContent = data.title;
                        timelineSubtitle.textContent = data.subtitle;
                        timelineDescription.textContent = data.desc;
                        timelineContainer.style.opacity = '1';
                    }, 300);
                }
            });
        });
    }
});
